DECLARE @CurrentMigration [nvarchar](max)

IF object_id('[dbo].[__MigrationHistory]') IS NOT NULL
    SELECT @CurrentMigration =
        (SELECT TOP (1) 
        [Project1].[MigrationId] AS [MigrationId]
        FROM ( SELECT 
        [Extent1].[MigrationId] AS [MigrationId]
        FROM [dbo].[__MigrationHistory] AS [Extent1]
        WHERE [Extent1].[ContextKey] = N'middleware_d26.Migrations.Configuration'
        )  AS [Project1]
        ORDER BY [Project1].[MigrationId] DESC)

IF @CurrentMigration IS NULL
    SET @CurrentMigration = '0'

IF @CurrentMigration < '202312272318114_InitialCreate'
BEGIN
    CREATE TABLE [dbo].[Applications] (
        [Id] [int] NOT NULL IDENTITY,
        [Name] [nvarchar](50) NOT NULL,
        [Creation_Dt] [datetime],
        CONSTRAINT [PK_dbo.Applications] PRIMARY KEY ([Id])
    )
    CREATE TABLE [dbo].[Containers] (
        [Id] [int] NOT NULL IDENTITY,
        [Name] [nvarchar](50),
        [Creation_Dt] [datetime],
        [Parent] [int],
        CONSTRAINT [PK_dbo.Containers] PRIMARY KEY ([Id])
    )
    CREATE TABLE [dbo].[Data] (
        [Id] [int] NOT NULL IDENTITY,
        [Content] [nvarchar](50),
        [Creation_Dt] [datetime],
        [Parent] [int],
        CONSTRAINT [PK_dbo.Data] PRIMARY KEY ([Id])
    )
    CREATE TABLE [dbo].[Subscriptions] (
        [Id] [int] NOT NULL IDENTITY,
        [Name] [nvarchar](50) NOT NULL,
        [Creation_Dt] [datetime],
        [Parent] [int],
        [Event] [nvarchar](50),
        [Endpoint] [nvarchar](50),
        CONSTRAINT [PK_dbo.Subscriptions] PRIMARY KEY ([Id])
    )
    CREATE TABLE [dbo].[__MigrationHistory] (
        [MigrationId] [nvarchar](150) NOT NULL,
        [ContextKey] [nvarchar](300) NOT NULL,
        [Model] [varbinary](max) NOT NULL,
        [ProductVersion] [nvarchar](32) NOT NULL,
        CONSTRAINT [PK_dbo.__MigrationHistory] PRIMARY KEY ([MigrationId], [ContextKey])
    )
    INSERT [dbo].[__MigrationHistory]([MigrationId], [ContextKey], [Model], [ProductVersion])
    VALUES (N'202312272318114_InitialCreate', N'middleware_d26.Migrations.Configuration',  0x1F8B0800000000000400ED5ADB6EE336107D2FD07F10F49C588983166D20EF22B59322E83A09A2645F17B434768852944A52AEFD6D7DE827F5173AD4FD66D9F27A83ECAE116011D39C33C399C3E1CC6CFEFBE75FFBFDCA67C61284A4011F99E78333D300EE061EE58B9119A9F9E92FE6FB773FFE605F7BFECAF898EDBBD0FB5092CB91F9A254786959D27D019FC8814F5D11C860AE066EE05BC40BACE1D9D9AFD6F9B9050861229661D88F1157D487F8037E1C07DC855045844D030F984CD7F11B274635EE880F32242E8C4C9F7A1E83BF89804FDEF0E7C18428329921808295328D2B4609DAE4009B9B06E13C5044A1C597CF121C2502BE70425C20EC691D02EE9B1326213DC965B17DD7439D0DF5A1AC4230837223A902BF27E0F945EA25AB2EBE97AFCDDC8BE8C76BF4B75AEB53C7BE1C995761C8A89BA2D7F55D8E99D07B1BDE4EC23328099F18C59653DC72929304B9A47F4E8C71C4542460C4215282B013E3219AA1F81FB07E0AFE043EE211636563D15CFCAEB2804B0F220841A8F523CCD323DC7AA66155E5ACBA602E5692494E76CBD5C5D034EE50399931C8B950F282A30201BF03074114780F4429105C6340ECCD86F69A2EFD6FA60DC98737CA34A664F501F842BD8CCC9FF00ADDD01578D9426AC033A778FF504689085A0CEC563A16101BFF69A232DD7845E089FA3551DB2A38D1C9147DB7084527F4E7492E7A64C91766C98148D1147DC088715573C75E3CD299BA3F85B4D4913D9B23AB1FBE223EDF34819C68265D41C3FDDEACB2F491501B75BDED476B0F7A3545AE97AF7063AEB91706F4D07ABAEF4AFEDCA6364C7392972AE4C6BDC1D238BD3A3255593D5882ED806A568ED2340A7B92AA7B50292CAD6EA8DCE036A052DDB10546BF118FE006C26BC349DE9D2D10E5ECD00652CD3D6D21C9CD2D9A172BE95EB22EC7DAD0E6D8531286488E52DB93AE184ED2F38C4F9DFE2D809F6058AE6CE904726B734D9836C8026ADFEA107970438554DA8D33A2F939F6FCC6B636AA6DF078A6B1854DF5F459842113D2BF27825D7D60858435D0C2BB3778601F53417C76C8EDABF6460DE9B829258C8896243D0E58E4F34D89BE4B3A49BB65F9646577844A0E2D0355BE68E2D956CD1DF520588D28D49EAF7A64778A7BE9EA1F2CEA45C6E81FF30ED96F2DE29BF0B2A7B40C95ADBD19DE9473FDC188133F11FD39D32EF665E89217FA9540678B47D27492A6FABA1F8C3695A2A03F7DBAC58F59A70F4A5AD39741D2A51E1879C95E81C9575F99CE8DC2B2BE25D79E1798B542D24E8BBAED43F54695976C310D74D1927ABAC273D652811FDF8081F3171B331ABB37DB30259CCE41AAA43B368767E7C3DA34FEED4CC62D293DB6FB78FCD5BBFC986D5BFBF89E3D76B9B1E74B22DC17221AEDE8E7F7ED1E5AABE2BEBDC0EADBC7B60E9FBFCB28EC399BDB2D08DB8629B1030E12C566A1F4D506B03670FD7E62B8B95AF96A63F9A652E2674772CBA0F3404CADCF35F782ED37C66C8EA0761E506E9B4F26650E866816E0811273ABF3CD5D2798DD03CC363DE5E1E70E03CE8D93CD36ECDE33CFAD23CF362DB5A1E99E53D166916A5BE5BF0FB12720E9A280D07F2DC2C1D54A0BD06CCF2D9F071963F1A4658BB22D35424F4111BCA1E44A283A27AEC2AF5D90321ED67F242CD29CF767E0DDF2FB488591BA9212FC19ABFC478A6D75EB8F47BF559BEDFBC46D8738029A497592B9E7BF459479B9DD37CD84B50942DFB134B3A2558ED21976B1CE91EE02BE2350EABE0984C0755E7E023F640826EFB94396B08F6DCF123EC082B8EBACD7D80CB23D1055B7DB134A1682F832C528E4F12372D8F357EFFE075B043F2C26250000 , N'6.4.4')
END

