DECLARE @CurrentMigration [nvarchar](max)

IF object_id('[dbo].[__MigrationHistory]') IS NOT NULL
    SELECT @CurrentMigration =
        (SELECT TOP (1) 
        [Project1].[MigrationId] AS [MigrationId]
        FROM ( SELECT 
        [Extent1].[MigrationId] AS [MigrationId]
        FROM [dbo].[__MigrationHistory] AS [Extent1]
        WHERE [Extent1].[ContextKey] = N'middleware_d26.Migrations.Configuration'
        )  AS [Project1]
        ORDER BY [Project1].[MigrationId] DESC)

IF @CurrentMigration IS NULL
    SET @CurrentMigration = '0'

IF @CurrentMigration < '202401051610119_DatabaseSchema'
BEGIN
    CREATE TABLE [dbo].[Applications] (
        [Id] [int] NOT NULL IDENTITY,
        [Name] [nvarchar](255) NOT NULL,
        [Creation_Dt] [datetime] NOT NULL,
        CONSTRAINT [PK_dbo.Applications] PRIMARY KEY ([Id])
    )
    CREATE TABLE [dbo].[Containers] (
        [Id] [int] NOT NULL IDENTITY,
        [Name] [nvarchar](255) NOT NULL,
        [Creation_Dt] [datetime] NOT NULL,
        [Parent] [int] NOT NULL,
        CONSTRAINT [PK_dbo.Containers] PRIMARY KEY ([Id])
    )
    CREATE TABLE [dbo].[Data] (
        [Id] [int] NOT NULL IDENTITY,
        [Name] [nvarchar](255) NOT NULL,
        [Content] [nvarchar](255) NOT NULL,
        [Creation_Dt] [datetime] NOT NULL,
        [Parent] [int] NOT NULL,
        CONSTRAINT [PK_dbo.Data] PRIMARY KEY ([Id])
    )
    CREATE TABLE [dbo].[Subscriptions] (
        [Id] [int] NOT NULL IDENTITY,
        [Name] [nvarchar](255) NOT NULL,
        [Creation_Dt] [datetime] NOT NULL,
        [Parent] [int] NOT NULL,
        [Event] [nvarchar](255) NOT NULL,
        [Endpoint] [nvarchar](255) NOT NULL,
        CONSTRAINT [PK_dbo.Subscriptions] PRIMARY KEY ([Id])
    )
    CREATE TABLE [dbo].[__MigrationHistory] (
        [MigrationId] [nvarchar](150) NOT NULL,
        [ContextKey] [nvarchar](300) NOT NULL,
        [Model] [varbinary](max) NOT NULL,
        [ProductVersion] [nvarchar](32) NOT NULL,
        CONSTRAINT [PK_dbo.__MigrationHistory] PRIMARY KEY ([MigrationId], [ContextKey])
    )
    INSERT [dbo].[__MigrationHistory]([MigrationId], [ContextKey], [Model], [ProductVersion])
    VALUES (N'202401051610119_DatabaseSchema', N'middleware_d26.Migrations.Configuration',  0x1F8B0800000000000400ED5ADB6EE336107D2FD07F10F49C5889175BB481BC8BD44E8AA0EB2488927D5DD0D2D8214A512A49A5F6B7ED433FA9BFD0A1EE57DB729D8DB135021831C5391CCE1C0E6746FEE7EBDFF6C7A5CF8C171092067C649E0FCE4C03B81B78942F4666A4E6A73F9B1F3FFCF8837DE5F94BE37336EF9D9E87925C8ECC67A5C20BCB92EE33F8440E7CEA8A400673357003DF225E600DCFCE7EB1CECF2D400813B10CC37E88B8A23EC45FF0EB38E02E842A226C1A78C0643A8E4F9C18D5B8253EC890B830327DEA790CFE2202BE78C39F0613A2088A2B582AD3B86494A0460EB0B96910CE034514EA7BF124C15122E00B27C401C21E5721E0BC396112D27D5C14D3B7DDD2D9506FC92A04332837922AF07B029EBF4B6D64D5C577B2B499DB10AD7885D6562BBDEBD89223F3320C197553F4FA7A176326F4DC86AD13E70C4AC2274631E514A79CE4144126E9BF13631C3115091871889420ECC4B88F6628FE3BAC1E833F808F78C458595954179F550670E85E042108B57A8079BA851BCF34ACAA9C5517CCC54A32C9CE6EB87A37348D5B5C9CCC18E45C2859C1518180DF8083200ABC7BA21408AE3120B66663F5DA5AFA335B0DC987E7C934A664F909F8423D8FCCE1FBF7A6714D97E06523A9064F9CE2F14321252268D170FDAA6301B1F65F262A5B1C4F083C527F13966D152C59CB1D7DDA0845B3F4674E2E7AE4CD77C39B26D63D3A95AB4D16DB897B3ADAF7A79D963A32EED018A72FED822647AAD7A8EE4433E90A1AEE764797A58FD43F34EABF29039B18572F6F7210AFB81706F4F5575E7FE4F29C24D56A9A9F95C92C2F2C1AC70F2B8AF404CA5487EA56136C075433E196A651E893142B834A3E6EAD87CA156E032A25671B60F4A5F8006E20BC369CE4A2DD00510E326D20D510D6E6925CDDA2E2B392922F2B0DAD8EDAD09E923044BA946AC574C4709242717CEAF4AF9CFC04C372654B01956B9BAF84D1872CA0F654BBC8836B2AA4D2669C114DC8B1E737A6B551ADC3E2D98A2D6CAA47E1C20D9990FE3F11EC2E9E2B14AC4116B6BDC6EDFA182CE29D43AE5DB5A06C48C7753C6144B444FA71C0229F77DD16EBA493D85D964F46B647A8C4E13250E54113CFB66AE6A8BBC06AF8A07607D6FDBA95D74B077F4F3E2FA2457F8FAF91FDDEFCDD8597DDBD65A86CEC6058538EF37BA24D7C39F4674CBBD8C19225AB4F2A44C9068FA42B33A841BA6A66B027DA55D289FEF45B2F7EB0347C53FA74A1A4154319241DEA8191A7FF15987CF41B93B99192D6A7E4ABE7A9692D05B5D37470F33B8C467E984C310D34D10BF5746EE8ACA4023FE6FFC0F9938D198DCD9B4D98124EE72055529E9BC3B3F361EDF5C7E1BC8AB0A4F4D8F6EF23BE799B2166DBC64642CFE2B6DC59E02F44B8CF44344BDBFFDE38F0505DF52ADDFDA31F5EC10F9B1A38B10DF6D82B3F3AB1DB89D506F4FF8B1CDDC9D0912487E2CC0D8DDABDEDB1DE87DD11B85F9BB5D922DBBA81BAA97F9A2453E8A859805B4AF4ADF65FB7EDB0AE6FB0B6AD536ECE6ED180EDECBCB661F7EEC96E6CC9B6AD526BEAEED8B56DA6C2B655FED18F3D0149170584FE091007572F5A8066736EF83CC8388B3B2D6B944DA9517A0A8AE039259742D13971153E7641CAF8F5C267C222CD7A7F06DE0DBF8B5418A94B29C19FB1CAFB22DB5ABF7EDC9AAEEA6CDF2566DBC716504DAA43CD1DFF35A2CCCBF5BE6E39791D10FA8CA50116B572940EB48B558E741BF02D8152F34D2004AEC3F323F821433079C71DF202BBE8F624E1132C88BBCA2A9A6E90CD8EA89ADD9E50B210C4972946218F5F91C39EBFFCF02F416FB635FB260000 , N'6.4.4')
END

